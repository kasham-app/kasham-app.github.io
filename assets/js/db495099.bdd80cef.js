"use strict";(self.webpackChunkjetdocs=self.webpackChunkjetdocs||[]).push([[3493],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),u=c(n),m=r,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||o;return n?a.createElement(h,i(i({ref:t},p),{},{components:n})):a.createElement(h,i({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=m;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[u]="string"==typeof e?e:r,i[1]=s;for(var c=2;c<o;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},2:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>o,metadata:()=>s,toc:()=>c});var a=n(7462),r=(n(7294),n(3905));const o={},i="Store Transaction Endpoint - POST Request",s={unversionedId:"tutorial-basics/storetransaction",id:"tutorial-basics/storetransaction",title:"Store Transaction Endpoint - POST Request",description:"The store transaction endpoint allows the mobile app to record a payment transaction after a user has successfully made a payment to a third-party bank account. This endpoint is used in conjunction with a third-party payment API, where the mobile app handles the websocket connection to receive payment confirmation and then stores the transaction details. By sending a POST request to the following URL, payment transactions can be stored:",source:"@site/docs/tutorial-basics/storetransaction.md",sourceDirName:"tutorial-basics",slug:"/tutorial-basics/storetransaction",permalink:"/docs/tutorial-basics/storetransaction",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Login Endpoint - POST Request",permalink:"/docs/tutorial-basics/signin"},next:{title:"Update User Profile Endpoint - POST Request",permalink:"/docs/tutorial-basics/updateuser"}},l={},c=[{value:"Required Headers",id:"required-headers",level:2},{value:"Required Parameters",id:"required-parameters",level:2},{value:"Store Transaction Process",id:"store-transaction-process",level:2},{value:"Store Transaction Response",id:"store-transaction-response",level:2}],p={toc:c},u="wrapper";function d(e){let{components:t,...n}=e;return(0,r.kt)(u,(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"store-transaction-endpoint---post-request"},"Store Transaction Endpoint - POST Request"),(0,r.kt)("p",null,"The store transaction endpoint allows the mobile app to record a payment transaction after a user has successfully made a payment to a third-party bank account. This endpoint is used in conjunction with a third-party payment API, where the mobile app handles the websocket connection to receive payment confirmation and then stores the transaction details. By sending a POST request to the following URL, payment transactions can be stored:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Endpoint:")," "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://kashamng.com/api/v1/transaction/store\n")),(0,r.kt)("h2",{id:"required-headers"},"Required Headers"),(0,r.kt)("p",null,"To access this endpoint, you need to include the ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," header with a valid bearer token. The bearer token can be obtained by authenticating the user through login or registration."),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Headers:")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"Authorization: Bearer <your_token>\n")),(0,r.kt)("h2",{id:"required-parameters"},"Required Parameters"),(0,r.kt)("p",null,"In order to successfully store a payment transaction, the following parameters are required in the request body. If any of these parameters are missing, the API will return an error response indicating the missing fields."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "user_id": 1,\n    "amount": "300"\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"user_id")," (integer): The unique identifier of the user who made the payment."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"amount")," (string): The amount of the payment transaction.")),(0,r.kt)("h2",{id:"store-transaction-process"},"Store Transaction Process"),(0,r.kt)("admonition",{title:"Important Notice!",type:"info"},(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Make sure you have obtained a valid bearer token by authenticating the user through login or registration.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"Send a POST request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"/api/v1/transaction/store")," endpoint with the required headers and parameters.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The API will validate the request data. If the ",(0,r.kt)("inlineCode",{parentName:"p"},"user_id")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"amount")," fields are missing, the API will return an error message.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"If the validation is successful, the mobile app should handle the websocket connection with the third-party payment API to receive the payment confirmation.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"After receiving the payment confirmation, the mobile app can then send a POST request to the ",(0,r.kt)("inlineCode",{parentName:"p"},"/api/v1/transaction/store")," endpoint with the user's ID and the amount of the payment.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"The API will store the payment transaction in the database and update the user's wallet balance accordingly.")),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("p",{parentName:"li"},"After storing the transaction, the API will return a success response indicating that the payment was successful, along with the updated user's wallet information.")))),(0,r.kt)("h2",{id:"store-transaction-response"},"Store Transaction Response"),(0,r.kt)("p",null,"After successfully storing the payment transaction, the user balance will be incremented with\nthe amount deposited and then the API will return the following response: ",(0,r.kt)("inlineCode",{parentName:"p"},"(balance: the user balance table)"),", ",(0,r.kt)("inlineCode",{parentName:"p"},"(user: the user table)")," You can easily use the returned tables to perfom further validations and actions on the user."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "message": "Payment was successful",\n    "balance": {\n        "id": 1,\n        "balance": 9750,\n        "user_id": 1,\n        "created_at": "2023-08-22T22:35:19.000000Z",\n        "updated_at": "2023-08-23T07:23:19.000000Z",\n        "user": {\n            "id": 1,\n            "name": "John Doe",\n            "email": "dakingeorge58@gmail.com",\n            "account_type": "merchant",\n            "full_name": "John Doe",\n            "phone_number": "1234567890",\n            "affiliate_id": "164e4a6b934614",\n            "onboarding": {\n                "IsstateOfOriginSet": null,\n                "IsreasonForKashamSet": 0,\n                "IspinCodeSet": 0,\n                "IsSelfieTaken": 0,\n                "IsdocumentUploaded": 0,\n                "IsbvnSet": "1",\n                "isTagSet": "1"\n            },\n            "is_pro": "1",\n            "api_requests": "1",\n            "sms_code": null,\n            "email_code": "114626",\n            "bvn_number": "986542567",\n            "kasham_tag": "@codedweb",\n            "created_at": "2023-08-22T13:14:49.000000Z",\n            "updated_at": "2023-08-22T18:12:18.000000Z"\n        }\n    }\n}\n')),(0,r.kt)("p",null,"The response includes:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"message")," (string): A success message indicating that the payment was successful."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"data")," (object): An object containing the details of the stored transaction, including the transaction ID, updated user's wallet balance, and user information.")),(0,r.kt)("admonition",{title:"Important Notice!",type:"success"},(0,r.kt)("p",{parentName:"admonition"},"Please make sure to replace ",(0,r.kt)("inlineCode",{parentName:"p"},"<your_token>")," with the actual bearer token you obtained through user authentication. Additionally, ensure that the mobile app handles the websocket connection with the third-party payment API and follows the outlined process for successful payment confirmation and storage. If you have any further questions or need assistance with the integration, please don't hesitate to reach out."),(0,r.kt)("p",{parentName:"admonition"},(0,r.kt)("a",{parentName:"p",href:"mailto:dakingeorge58@gmail.com"},"dakingeorge58@gmail.com"))))}d.isMDXComponent=!0}}]);