"use strict";(self.webpackChunkjetdocs=self.webpackChunkjetdocs||[]).push([[8450],{3905:(e,t,a)=>{a.d(t,{Zo:()=>u,kt:()=>h});var n=a(7294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function s(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),p=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):o(o({},t),e)),a},u=function(e){var t=p(e.components);return n.createElement(l.Provider,{value:t},e.children)},d="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},c=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,u=s(e,["components","mdxType","originalType","parentName"]),d=p(a),c=r,h=d["".concat(l,".").concat(c)]||d[c]||m[c]||i;return a?n.createElement(h,o(o({ref:t},u),{},{components:a})):n.createElement(h,o({ref:t},u))}));function h(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,o=new Array(i);o[0]=c;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[d]="string"==typeof e?e:r,o[1]=s;for(var p=2;p<i;p++)o[p]=a[p];return n.createElement.apply(null,o)}return n.createElement.apply(null,a)}c.displayName="MDXCreateElement"},6792:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>m,frontMatter:()=>i,metadata:()=>s,toc:()=>p});var n=a(7462),r=(a(7294),a(3905));const i={},o="Update User Profile Endpoint - POST Request",s={unversionedId:"tutorial-basics/updateuser",id:"tutorial-basics/updateuser",title:"Update User Profile Endpoint - POST Request",description:"The update user profile endpoint allows users to update their profile information within the Kasham application. By sending a POST request to the following URL, users can modify their account details:",source:"@site/docs/tutorial-basics/updateuser.md",sourceDirName:"tutorial-basics",slug:"/tutorial-basics/updateuser",permalink:"/docs/tutorial-basics/updateuser",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Store Transaction Endpoint - POST Request",permalink:"/docs/tutorial-basics/storetransaction"},next:{title:"User Balance and Transactions - GET Request",permalink:"/docs/tutorial-basics/userbalance"}},l={},p=[{value:"Authentication",id:"authentication",level:3},{value:"Request Parameters",id:"request-parameters",level:3},{value:"Validation and File Upload",id:"validation-and-file-upload",level:3},{value:"Update Process",id:"update-process",level:3},{value:"Response",id:"response",level:3},{value:"Update Fields",id:"update-fields",level:3}],u={toc:p},d="wrapper";function m(e){let{components:t,...a}=e;return(0,r.kt)(d,(0,n.Z)({},u,a,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"update-user-profile-endpoint---post-request"},"Update User Profile Endpoint - POST Request"),(0,r.kt)("p",null,"The update user profile endpoint allows users to update their profile information within the Kasham application. By sending a POST request to the following URL, users can modify their account details:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Endpoint:")," "),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://kashamng.com/api/v1/update/user\n")),(0,r.kt)("h3",{id:"authentication"},"Authentication"),(0,r.kt)("p",null,"To access the update user profile endpoint, the mobile app developer must include the ",(0,r.kt)("inlineCode",{parentName:"p"},"Authorization")," header in the HTTP request. This header should contain the ",(0,r.kt)("inlineCode",{parentName:"p"},"Bearer")," token obtained during either the user's login or registration process. This authentication ensures that only authorized users can update their profiles."),(0,r.kt)("admonition",{title:"Example:",type:"info"},(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre"},"Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiJ9...\n"))),(0,r.kt)("h3",{id:"request-parameters"},"Request Parameters"),(0,r.kt)("p",null,"To successfully update a user's profile, the following parameters can be included in the request body:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"isTagSet"),' (string): Indicates whether the user\'s tag is set ("1" for yes, "0" for no).'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"email")," (string): The updated email address of the user."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"password")," (string): The new password chosen by the user."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"name")," (string): The updated display name of the user."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"role")," (string): The user's updated role or permission level within the system."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"account_type"),' (string): The updated type of account the user holds (e.g., "merchant").'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"full_name")," (string): The updated full name of the user."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"phone_number")," (string): The updated phone number of the user."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"affiliate_id")," (string): The updated affiliate ID associated with the user."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"referred_by")," (string): The Affiliate ID of the user who referred this user, if applicable."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"sms_code")," (string): The updated SMS verification code, if applicable."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"email_code")," (string): The updated email verification code, if applicable."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"api_requests"),' (string): The user\'s updated API request status ("1" for enabled, "0" for disabled).'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"is_pro"),' (string): Indicates whether the user has a pro membership. user ("1" for yes, "0" for no).'),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"stateof_origin")," (string): The updated state of origin of the user."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"reasonfor_kasham")," (string): The updated reason for using Kasham."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"pin_code")," (string): The updated PIN code of the user for login-in to their account."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"selfie_upload")," (file): The updated selfie image of the user (PNG or JPG format)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"document_upload")," (file): The updated document image of the user (PNG or JPG format)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"bvn_number")," (string): The updated Bank Verification Number (BVN) of the user."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"kasham_tag")," (string): The updated Kasham tag of the user.")),(0,r.kt)("h3",{id:"validation-and-file-upload"},"Validation and File Upload"),(0,r.kt)("p",null,"Before updating the user profile, the mobile app developer should ensure that the uploaded files meet the required criteria. For both the ",(0,r.kt)("inlineCode",{parentName:"p"},"selfie_upload")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"document_upload")," files:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"Make sure that  the file format is PNG or JPG.")),(0,r.kt)("admonition",{title:"Handling The Uploaded files",type:"info"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"Laravel Generate a unique filename with a timestamp and extension."),(0,r.kt)("li",{parentName:"ul"},"Laravel Move the file to the appropriate directory (",(0,r.kt)("inlineCode",{parentName:"li"},"uploads/selfie")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"uploads/documents"),")."),(0,r.kt)("li",{parentName:"ul"},"Laravel Update the corresponding attribute in the model (",(0,r.kt)("inlineCode",{parentName:"li"},"selfie_upload")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"document_upload"),")."),(0,r.kt)("li",{parentName:"ul"},"Laravel validates the file mimes to make sure it corresponds with the (",(0,r.kt)("inlineCode",{parentName:"li"},"required mimes in the application"),")"))),(0,r.kt)("h3",{id:"update-process"},"Update Process"),(0,r.kt)("p",null,"When handling the update process, Laravel will update the user's profile based on the provided parameters. If certain fields are not included in the request, the existing values will remain unchanged."),(0,r.kt)("p",null,"The update process involves the following steps:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"Get the authenticated user using ",(0,r.kt)("inlineCode",{parentName:"li"},"$request->user()"),"."),(0,r.kt)("li",{parentName:"ol"},"Prepare the onboarding data based on the provided onboarding parameters."),(0,r.kt)("li",{parentName:"ol"},"Update the user's attributes based on the request parameters, including name, email, password, role, account type, and more."),(0,r.kt)("li",{parentName:"ol"},"Validate and process the uploaded selfie image and document image, updating the respective attributes."),(0,r.kt)("li",{parentName:"ol"},"Update the user's Bank Verification Number (BVN) and Kasham tag if provided."),(0,r.kt)("li",{parentName:"ol"},"Save the onboarding data and user profile changes to the database using ",(0,r.kt)("inlineCode",{parentName:"li"},"$user->save()"),"."),(0,r.kt)("li",{parentName:"ol"},"Respond with a JSON message confirming the successful account update.")),(0,r.kt)("h3",{id:"response"},"Response"),(0,r.kt)("p",null,"After a successful update, the API will return the following response:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "message": "Account updated successfully."\n}\n')),(0,r.kt)("h3",{id:"update-fields"},"Update Fields"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "name": "John Doe",\n    "email": "dakingeorge58@gmail.com",\n    "password": "new_secure_password",\n    "password_confirmation": "new_secure_password",\n    "role": "admin",\n    "account_type": "premium",\n    "full_name": "John Doe",\n    "phone_number": "1234567890",\n    "affiliate_id": "164e4a6b934614",\n    "referred_by": "user_id_here",\n    "sms_code": "123456",\n    "email_code": "114626",\n    "api_requests": "1",\n    "is_pro": "1",\n    "stateof_origin": "Lagos",\n    "reasonfor_kasham": "Exploring financial services",\n    "pin_code": "1234",\n    "selfie_upload": "2023_08_22_190201selfie_upload.png",\n    "document_upload": "2023_08_22_190201document_upload.png",\n    "bvn_number": "986542567",\n    "kasham_tag": "@codedweb",\n    "onboarding": {\n        "IsstateOfOriginSet": null,\n        "IsreasonForKashamSet": 0,\n        "IspinCodeSet": 0,\n        "IsSelfieTaken": 0,\n        "IsdocumentUploaded": 0,\n        "IsbvnSet": "1",\n        "isTagSet": "1"\n    }\n}\n')))}m.isMDXComponent=!0}}]);